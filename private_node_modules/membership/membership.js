
async function get_allowed_courses(emailaddress, members) {
	let record = await members.collection('courses').findOne({'emailaddress' : emailaddress}, {'courses' : true});
	if (!record) {
		return null;
	}
	let allowed_courses = record.courses;
	return allowed_courses;

}

async function add_to_allowed_courses(emailaddress, courseid, members) {
	await members.collection('courses').upsert({'emailaddress' : emailaddress}, { $push : {'courses' : courseid }});

}

async function remove_from_allowed_courses(emailaddress, courseid, members) {
	await members.collection('courses').update({'emailaddress' : emailaddress}, { $pull : {'courses' : courseid }});
}


module.exports = {get_allowed_courses, add_to_allowed_courses, remove_from_allowed_courses};